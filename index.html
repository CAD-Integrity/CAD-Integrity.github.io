<!doctype html>
<html>
   <style>

path {
  stroke: #fff;
  fill-rule: evenodd;
}

text {
  font-family: Arial, sans-serif;
  font-size: 12px;
}

</style>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>CAD History</title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!--Google Font link-->
      <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Raleway:400,600,700" rel="stylesheet">
      <link rel="stylesheet" href="assets/css/font-awesome.min.css">
      <link rel="stylesheet" href="assets/css/bootstrap.min.css">
      <link rel="stylesheet" href="assets/css/magnific-popup.css">
      <!--For Plugins external css-->
      <link rel="stylesheet" href="assets/css/plugins.css" />
      <!--Theme custom css -->
      <link rel="stylesheet" href="assets/css/style.css">
      <!--Theme Responsive css-->
      <link rel="stylesheet" href="assets/css/responsive.css" />
      <script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
      <script src="https://d3js.org/d3.v3.min.js"></script>
   </head>
   <body data-spy="scroll" data-target=".navbar" data-offset="200">
      <div class='preloader'>
         <div class='loaded'>&nbsp;</div>
      </div>
      <div class="culmn">
         <header id="main_menu" class="header navbar-fixed-top" style="background-color:black;">
            <div class="main_menu_bg">
               <div class="container">
                  <div class="row">
                     <div class="nave_menu">
                        <nav class="navbar navbar-default">
                           <div class="container-fluid">
                              <div class="navbar-header">
                                 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                 <span class="sr-only">Toggle navigation</span>
                                 <span class="icon-bar"></span>
                                 <span class="icon-bar"></span>
                                 <span class="icon-bar"></span>
                                 </button>
                                 <a class="navbar-brand" href="#home">
                                 <img src="assets/images/compLogo.png"/>
                                 </a>
                              </div>
                              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                 <ul class="nav navbar-nav navbar-right">
                                    <li><a href="#home">HOME</a></li>
                                    <li><a href="#service">HISTORY</a></li>
                                 </ul>
                              </div>
                           </div>
                        </nav>
                     </div>
                  </div>
               </div>
            </div>
         </header>
         <section id="home" class="home" style="background-color:black;">
            <div class="main_home_slider text-center">
                <div id="FinChart" class="single_home_slider">
                     <div class="main_home wow fadeInUp" data-wow-duration="700ms" style="color:white">
                         <h2>
                             <script> document.write(new Date().toDateString()); </script>
                         </h2>
                     </div>
                </div>
                <div class="single_home_slider">
                     <div class="main_home wow fadeInUp" data-wow-duration="700ms">
                     </div>
                </div>
                <div class="single_home_slider">
                     <div class="main_home wow fadeInUp" data-wow-duration="700ms">
                     </div>
                </div>
             </div>
         </section>
         <section class="footer" style="background-color:black;">
            <div class="container">
               <div class="row">
                  <div class="col-sm-12">
                     <div class="main_footer">
                        <div class="row">
                           <div class="col-sm-6 col-xs-12">
                           </div>
                           <div class="col-sm-6 col-xs-12">
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </section>
      </div>
      <div class="scrollup">
         <a href="#"><i class="fa fa-chevron-up"></i></a>
      </div>
      <script src="assets/js/vendor/jquery-1.11.2.min.js"></script>
      <script src="assets/js/vendor/bootstrap.min.js"></script>
      <script src="assets/js/jquery.magnific-popup.js"></script>
      <script src="assets/js/jquery.mixitup.min.js"></script>
      <script src="assets/js/jquery.easing.1.3.js"></script>
      <script src="assets/js/jquery.masonry.min.js"></script>
      <script src="assets/js/plugins.js"></script>
      <script src="assets/js/main.js"></script>
      <script>
         var width = 500,
           height = 600,
           radius = Math.min(width, height) / 2;
         
         var x = d3.scale.linear().range([0, 2 * Math.PI]);
         var y = d3.scale.sqrt().range([0, radius]);
         var color = d3.scale.category10();
         
         var svg = d3.select("#FinChart").append("svg")
           .attr("width", width)
           .attr("height", height)
           .append("g").attr("transform", "translate(" + width / 2 + "," + (height / 2 + 10) + ") rotate(-90 0 0)");
         
         var partition = d3.layout.partition()
           .value(function (d) { return d.size; });
         
         var arc = d3.svg.arc()
           .startAngle(function (d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })
           .endAngle(function (d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })
           .innerRadius(function (d) { return Math.max(0, y(d.y)); })
           .outerRadius(function (d) { return Math.max(0, y(d.y + d.dy)); });
         
         //d3.json("/d/4063550/flare.json", function(error, root) {
         
         
         var root =  getData2();
         
         var g = svg.selectAll("g")
           .data(partition.nodes(root)).enter().append("g");
         
         var path = g.append("path").attr("d", arc)
           .style("fill", function (d) { return color((d.children ? d : d.parent).name); })
           .on("click", click);
         
         //.append("text")
         var text = g.append("text").attr("x", function (d) { return y(d.y); })
           .attr("dx", "6") // margin
         	.attr("dy", ".35em") // vertical-align
           .attr("transform", function (d) { return "rotate(" + computeTextRotation(d) + ")"; })
           .text(function (d) { return d.name; })
           .style("fill","white");
         
         function computeTextRotation(d) {
           var angle = x(d.x + d.dx / 2) - Math.PI / 2;
           return angle / Math.PI * 180;
         }
         
         
         function click(d) {
           // fade out all text elements
           if(d.size !== undefined) {
             d.size += 100;
           };
           text.transition().attr("opacity", 0);
         
           path.transition().duration(750)
             .attrTween("d", arcTween(d))
             .each("end", function (e, i) {
             // check if the animated element's data e lies within the visible angle span given in d
             if (e.x >= d.x && e.x < (d.x + d.dx)) {
               // get a selection of the associated text element
               var arcText = d3.select(this.parentNode).select("text");
               // fade in the text element and recalculate positions
               arcText.transition().duration(750)
                 .attr("opacity", 1)
                 .attr("transform", function () { return "rotate(" + computeTextRotation(e) + ")" })
                 .attr("x", function (d) { return y(d.y); });
             }
           });
         } 
         
         // Word wrap!
         var insertLinebreaks = function (t, d, width) {
           alert(0)
           var el = d3.select(t);
           var p = d3.select(t.parentNode);
           p.append("g").attr("x", function (d) { return y(d.y); })
             .attr("transform", function (d) { return "rotate(" + computeTextRotation(d) + ")"; })
             .append("foreignObject")
             .attr('x', -width/2)
             .attr("width", width).attr("height", 200)
             .append("xhtml:p").attr('style','word-wrap: break-word; text-align:center;')
             .html(d.name);
           alert(1)
           el.remove();
           alert(2);
         };
         
         
         d3.select(self.frameElement).style("height", height + "px");
         
         // Interpolate the scales!
         function arcTween(d) {
           var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
             yd = d3.interpolate(y.domain(), [d.y, 1]),
             yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
           return function (d, i) {
             return i ? function (t) {
               return arc(d);
             } : function (t) {
               x.domain(xd(t));
               y.domain(yd(t)).range(yr(t));
               return arc(d);
             };
           };
         }
         
         function getData() {
             return {
          "name": "Root",
          "children": [
           {
            "name": "A1",
            "children": [
               {"name": "B1", "size": 30},
               {"name": "B2", "size": 40},
               {"name": "B3",
         	"children":[
         	    {"name": "C1", "size": 10},
                     {"name": "C2", "size": 15}
         	]
                }
              ]
             },
             {
              "name": "A2",
              "children": [
               {"name": "B4", "size": 40},
               {"name": "B5", "size": 30},
               {"name": "B6", "size": 10}
              ]
             },
             {
              "name": "A3",
              "children": [
               {"name": "B7", "size": 50},
               {"name": "B8", "size": 15}
         	
              ]
             }
            ]
           }
         };
         
         function getData2() {
             return {
         		"name":"Root",
         		"children":
         		[
         			{
         				"name": "tk5311",
         				"children":
         				[
         					{"name": "B4", "size": 40},
         					{"name": "B5", "size": 30},
         					{"name": "B6", "size": 10}
         				]
         			},
         			{
         				"name": "tk5327",
         				"children":
         				[
         					{"name": "B1", "size": 70},
         					{"name": "B2", "size": 30},
         					{"name": "B3", "size": 10}
         				]
         			}
         		]
             }
           
         };
      </script>
   </body>
</html>
